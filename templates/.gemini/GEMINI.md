# Gemini CLI カスタム指示

## 言語設定

**日本語を基本言語として使用してください。**

- すべての応答は日本語で行う
- コメントは日本語で記述
- ドキュメントは日本語で作成
- エラーメッセージの説明は日本語で
- コードそのもの（変数名、関数名など）は英語でも可

## コミュニケーションスタイル

- 丁寧語を使用（「です・ます」調）
- 技術用語は適切に日本語訳するか、英語のままカタカナ表記
- 不明点は必ず質問する
- 段階的に説明し、理解を確認しながら進める

## 作業原則

### 変更前の確認
- コードを変更する前に、必ず既存の実装を読んで理解する
- 影響範囲を事前に提示し、承認を得てから作業する
- 既存のコードパターン・規約を尊重し、一貫性を保つ

### 安全な作業
- 破壊的変更を行う前に必ず確認する
- 一度に大きな変更をせず、小さなステップで進める
- 変更後は関連するテストを実行して動作確認する

### 情報の正確性
- 不確かな情報は推測であることを明示する
- ライブラリの仕様は最新ドキュメントで確認する
- エラーの原因が不明な場合は、複数の可能性を提示する

## コード品質基準

### 共通原則
- マジックナンバーは定数化する
- 関数は単一責任の原則に従う（1関数1目的）
- 早期リターンで条件分岐のネストを浅く保つ
- 命名で意図を表現する（コメントに頼らない）
- 関数は30行以内を目安（超える場合は分割を検討）
- パラメータは3個以内（超える場合はオブジェクトにまとめる）

### TypeScript / JavaScript（該当プロジェクトの場合）
- `any` 型の使用禁止 → `unknown` + 型ガードを使用
- `null` より `undefined` を優先（API 境界を除く）
- `const` を優先、`let` は必要な場合のみ、`var` は禁止

## Gemini CLI 固有の設定

### ツール実行モード
- 安全性を重視し、必要に応じて確認を求める
- ファイル編集は慎重に行う
- YOLO モード (`-y`) は慎重に使用

### コンテキスト管理
- `/memory show` で現在のコンテキストを確認可能
- プロジェクト固有の情報はこのファイルに記載
- サブディレクトリにも GEMINI.md を配置して、コンポーネント固有の指示を追加可能

### 便利なコマンド
- `/init`: 新しいプロジェクト用の GEMINI.md を生成
- `/memory show`: 現在のメモリとコンテキストを表示
- `@ファイル名`: 特定のファイルをコンテキストに含める

### `@` 参照の活用例
```
@src/models/user.py このモジュールのテストを作成して
@src/components/Button.tsx このコンポーネントのリファクタリングを提案して
@pyproject.toml 依存関係を確認して
@package.json 依存関係を確認して
```

## コーディング規約

- コメント：日本語
- docstring：日本語
- commit message：日本語と英語の併記（英語タイトル、日本語詳細）
- README/ドキュメント：日本語

## テスト方針

- AAA パターン（Arrange / Act / Assert）で記述
- 振る舞いベース（内部実装ではなく外部振る舞いをテスト）
- テストは独立・冪等に保つ
- カバレッジ目標: 新規コードは80%以上

## Git ワークフロー

### コミットメッセージ
Conventional Commits に準拠:
```
<type>: <日本語での説明>
```

**type**: `feat` / `fix` / `docs` / `refactor` / `test` / `style` / `chore` / `perf`

### ブランチ命名
- `feature/<機能名>` / `fix/<バグ名>` / `refactor/<対象>`

## 例

### 良い例

```
// 定数は名前付きで定義
MAX_RETRY_COUNT = 3

// 関数は単一責任で、日本語コメントを付与
function calculateTotalPrice(items):
    // 各商品の価格を合計
    return sum(item.price for item in items)
```

※ 実際のコードは、プロジェクトの言語・フレームワークに合わせて記述してください。

### コミットメッセージの例

```
feat: ユーザー認証機能を追加

- メールアドレスとパスワードによるログイン機能
- JWTトークンベースの認証
- パスワードのハッシュ化（bcrypt使用）
```
