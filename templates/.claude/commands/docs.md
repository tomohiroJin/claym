# ドキュメント生成コマンド

このコマンドは、README や API ドキュメントなどのドキュメントを自動生成します。

## 概要

`/docs` コマンドは、コードベースから自動的にドキュメントを生成し、ドキュメント作成の負担を軽減します。以下のようなドキュメントの生成に対応しています：

- README.md の生成・更新
- API ドキュメントの生成
- JSDoc/docstring の生成
- 使用例・サンプルコードの生成
- アーキテクチャドキュメントの生成

## 使い方

```
/docs <生成したいドキュメントの説明>
```

### 例

```
/docs プロジェクトの README.md を作成
```

```
/docs API エンドポイントのドキュメントを生成
```

```
/docs src/utils/validator.ts に JSDoc を追加
```

## プロンプト

以下のガイドラインに従ってドキュメントを生成してください：

### 1. ドキュメント生成の準備

#### コードベースの分析

- プロジェクトの構造を理解する
- 主要な機能を特定する
- 使用されている技術スタックを確認する
- 既存のドキュメントを確認する

#### ドキュメントの種類を判断

ユーザーのリクエストから、以下のどのドキュメントを生成すべきか判断してください：

1. **README.md** - プロジェクト全体の概要
2. **API ドキュメント** - API エンドポイントの詳細
3. **コードドキュメント** - JSDoc/docstring
4. **ガイド・チュートリアル** - 使い方の説明
5. **アーキテクチャドキュメント** - 設計・構造の説明

### 2. README.md の生成

README.md を生成する場合、以下の構成を使用してください：

```markdown
# <プロジェクト名>

<プロジェクトの簡潔な説明>

## 特徴

- 主要な機能1
- 主要な機能2
- 主要な機能3

## 前提条件

- Node.js 18.x 以上
- PostgreSQL 14.x 以上
- など...

## インストール

\`\`\`bash
# インストール手順
git clone <repository>
cd <project>
npm install
\`\`\`

## 設定

\`\`\`bash
# 環境変数の設定
cp .env.example .env
# .env ファイルを編集
\`\`\`

## 使い方

\`\`\`bash
# 開発サーバーの起動
npm run dev
\`\`\`

## API ドキュメント

主要な API エンドポイント：

- `GET /api/users` - ユーザー一覧取得
- `POST /api/users` - ユーザー作成
- など...

詳細は [API ドキュメント](./docs/api.md) を参照してください。

## ディレクトリ構成

\`\`\`
src/
├── api/          # API エンドポイント
├── models/       # データモデル
├── services/     # ビジネスロジック
└── utils/        # ユーティリティ
\`\`\`

## 開発

### テストの実行

\`\`\`bash
npm test
\`\`\`

### ビルド

\`\`\`bash
npm run build
\`\`\`

## デプロイ

<デプロイ手順>

## トラブルシューティング

### よくある問題

1. **<問題>**
   - 原因: <原因>
   - 解決方法: <解決方法>

## コントリビューション

プルリクエストを歓迎します。大きな変更の場合は、まず Issue を開いて変更内容を議論してください。

## ライセンス

[MIT](./LICENSE)
```

### 3. API ドキュメントの生成

API ドキュメントを生成する場合、以下の形式を使用してください：

```markdown
# API ドキュメント

## 認証

すべての API リクエストには、Authorization ヘッダーに Bearer トークンが必要です。

\`\`\`
Authorization: Bearer <your-token>
\`\`\`

## エンドポイント

### ユーザー関連

#### GET /api/users

ユーザーの一覧を取得します。

**リクエスト**

\`\`\`http
GET /api/users?page=1&limit=10
Host: api.example.com
Authorization: Bearer <token>
\`\`\`

**クエリパラメータ**

| パラメータ | 型 | 必須 | 説明 |
|-----------|-------|------|------|
| page | number | No | ページ番号（デフォルト: 1） |
| limit | number | No | 1ページあたりの件数（デフォルト: 10） |

**レスポンス**

\`\`\`json
{
  "data": [
    {
      "id": "user-123",
      "name": "山田太郎",
      "email": "yamada@example.com",
      "createdAt": "2025-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 100
  }
}
\`\`\`

**ステータスコード**

| コード | 説明 |
|-------|------|
| 200 | 成功 |
| 401 | 認証エラー |
| 500 | サーバーエラー |
```

### 4. コードドキュメント（JSDoc/docstring）の生成

コードのドキュメントコメントを生成する場合：

#### TypeScript/JavaScript (JSDoc)

```typescript
/**
 * ユーザーを ID で検索します。
 *
 * @param {string} userId - ユーザーID
 * @returns {Promise<User>} ユーザーオブジェクト
 * @throws {NotFoundError} ユーザーが見つからない場合
 *
 * @example
 * const user = await findUserById('user-123');
 * console.log(user.name);
 */
async function findUserById(userId: string): Promise<User> {
  // 実装...
}
```

#### Python (docstring)

```python
def calculate_total_price(items: list[Item], discount: float = 0.0) -> float:
    """
    商品リストから合計金額を計算します。

    Args:
        items (list[Item]): 商品のリスト
        discount (float, optional): 割引率（0.0〜1.0）。デフォルトは0.0。

    Returns:
        float: 割引適用後の合計金額

    Raises:
        ValueError: 割引率が範囲外の場合

    Examples:
        >>> items = [Item(price=100), Item(price=200)]
        >>> calculate_total_price(items)
        300.0
        >>> calculate_total_price(items, discount=0.1)
        270.0
    """
    # 実装...
```

### 5. ドキュメント生成の原則

#### 明確さ

- **簡潔に**: 冗長な説明を避ける
- **具体的に**: 抽象的な表現を避ける
- **例示**: 必ず使用例を含める

#### 正確性

- **コードとの一致**: コードの実装と矛盾しない
- **最新性**: 古い情報を含めない
- **検証**: 生成したドキュメントの内容を確認

#### ユーザビリティ

- **構造化**: 適切な見出しとセクションで整理
- **検索可能**: キーワードを適切に配置
- **リンク**: 関連ドキュメントへのリンクを提供

### 6. 多言語対応

このプロジェクトは日本語をベースとしていますが、必要に応じて英語版も生成してください：

```markdown
# Project Name

[English](#english) | [日本語](#japanese)

## <a name="english"></a>English

<英語版のドキュメント>

## <a name="japanese"></a>日本語

<日本語版のドキュメント>
```

### 7. ドキュメント生成後の説明

ドキュメント生成後、以下を説明してください：

- **生成したドキュメントの一覧**
- **各ドキュメントの配置場所**
- **次のステップ**（レビュー、公開など）
- **メンテナンス方法**

## 例: README.md の生成

### ユーザーの入力

```
/docs このプロジェクトの README.md を作成してください
```

### 期待される出力

1. **分析結果の報告**
   ```
   プロジェクトを分析しました：
   - 言語: TypeScript
   - フレームワーク: Express.js
   - データベース: PostgreSQL
   - 主要機能: REST API、認証、ユーザー管理
   ```

2. **README.md の生成**
   - プロジェクトの概要
   - インストール手順
   - 使用方法
   - API ドキュメントへのリンク
   - 開発者向け情報

3. **次のステップの提示**
   ```
   README.md を生成しました。

   次のステップ:
   1. 内容を確認してください
   2. プロジェクト固有の情報を追加してください
   3. スクリーンショットがあれば追加してください
   4. コミットしてリポジトリに追加してください
   ```

## カスタマイズ

### テンプレートの追加

プロジェクトで使用するドキュメントテンプレートを定義できます：

```markdown
## ドキュメントテンプレート

### API エンドポイントのテンプレート

すべての API ドキュメントは以下の形式に従ってください：

1. 概要
2. 認証
3. エンドポイント一覧
4. 詳細（各エンドポイント）
5. エラーハンドリング
6. レート制限
```

### スタイルガイドの指定

ドキュメントのスタイルを指定できます：

```markdown
## スタイルガイド

- 見出しは `#` を使用（`===` や `---` は使わない）
- コードブロックは言語を明示（```typescript など）
- リストは `-` を使用（`*` や `+` は使わない）
- 日本語と英語の間にスペースを入れない
```

### 自動更新の設定

既存のドキュメントを更新する際の方針を定義できます：

```markdown
## ドキュメント更新の方針

- セクションの追加のみ（既存セクションは削除しない）
- 手動で編集した部分は保持する
- バージョン情報は自動更新する
```

## 注意事項

### 既存ドキュメントの尊重

- 既存のドキュメントがある場合は、上書きせず更新を提案
- 手動で編集された部分を識別
- 変更の差分を明示

### メンテナンス性

- ドキュメントはコードと同期を保つ
- 自動生成できる部分と手動編集が必要な部分を明確に区別
- 定期的な更新を推奨

### アクセシビリティ

- スクリーンリーダーに配慮した構造
- 画像には代替テキストを含める
- リンクテキストは明確に

## トラブルシューティング

### ドキュメントが冗長になってしまう

- 必要最小限の情報に絞る
- 詳細は別ファイルに分割する
- 重複を避ける

### コードと矛盾するドキュメント

- コードを優先的に確認する
- 実装を正確に反映する
- 不明な点は質問として提示する

### ドキュメントの構造が不適切

- 既存のドキュメント構造を参考にする
- 一般的なベストプラクティスに従う
- ユーザー視点で構成する

---

**更新日**: 2025-10-20
