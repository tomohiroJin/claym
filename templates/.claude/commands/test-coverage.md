# テストカバレッジ分析コマンド

テストカバレッジを分析し、優先的にテストを追加すべき箇所を提案します。

## 使い方

```
/test-coverage <対象ディレクトリやファイル（省略可）>
```

## プロンプト

以下の手順でテストカバレッジを分析してください：

### 1. カバレッジの取得

プロジェクトの技術スタックに応じたカバレッジコマンドを実行します：

- プロジェクトの設定ファイル（`package.json`, `pyproject.toml` 等）を確認し、適切なカバレッジコマンドを特定
- `$1` で対象が指定されている場合は、その範囲に限定

### 2. カバレッジの分析

結果を分析し、以下の観点で整理します：

```markdown
## カバレッジ分析結果

### 全体サマリー
| 指標 | カバレッジ | 目標 |
|------|-----------|------|
| Statements | N% | 80% |
| Branches | N% | 80% |
| Functions | N% | 80% |
| Lines | N% | 80% |

### カバレッジが低いファイル（優先度順）
| ファイル | Lines | 重要度 | 理由 |
|---------|-------|--------|------|
| `path/to/file` | N% | 高 | ビジネスロジック |
| `path/to/file` | N% | 中 | ユーティリティ |
```

### 3. 優先テスト箇所の提案

テストが不足している箇所を重要度順に提案します：

**優先基準**:
1. ビジネスロジック（収益・データに直結）
2. エラーハンドリング（障害対応）
3. 境界値・エッジケース
4. ユーティリティ関数

```markdown
## テスト追加提案

### 高優先度
1. **`path/to/file` の `functionName`**
   - 現状: テストなし
   - 理由: 重要なビジネスロジック
   - 推奨テスト:
     - 正常系: [テストの概要]
     - 異常系: [テストの概要]

### 中優先度
[同様の形式]
```

### 4. テスト生成の提案

ユーザーが希望する場合、優先度の高い順にテストコードを生成します。
テストは AAA パターン（Arrange / Act / Assert）で記述します。

---

**更新日**: 2025-10-20
